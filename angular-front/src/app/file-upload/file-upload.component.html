<div class="file-upload-container">
  <div class="page-header">
    <h1>üìÅ File Manager</h1>
    <p>Upload, manage, and download your files securely</p>
  </div>

  <div class="content-card">
    <!-- Upload Section -->
    <div class="upload-section">
      <h2>Upload New File</h2>
      
      <div class="upload-area" 
           (dragover)="onDragOver($event)" 
           (dragleave)="onDragLeave($event)" 
           (drop)="onDrop($event)"
           [class.dragover]="isDragOver">
        
        <div class="upload-content">
          <div class="upload-icon">üì§</div>
          <p class="upload-text">
            Drag and drop files here or 
            <label for="file-input" class="file-input-label">browse files</label>
          </p>
          <p class="upload-hint">Maximum file size: 10MB</p>
          <input 
            type="file" 
            id="file-input" 
            (change)="onFileSelected($event)" 
            style="display: none;"
            accept="image/*,.pdf,.txt,.csv,.doc,.docx,.xls,.xlsx,.zip,.rar"
          >
        </div>
      </div>

      <!-- Upload Progress -->
      <div class="upload-progress" *ngIf="isUploading">
        <div class="progress-bar">
          <div class="progress-fill" [style.width.%]="uploadProgress"></div>
        </div>
        <p class="progress-text">Uploading... {{ uploadProgress }}%</p>
      </div>
    </div>

    <!-- Error Message -->
    <div class="error-message" *ngIf="errorMessage">
      ‚ùå {{ errorMessage }}
    </div>

    <!-- Files List -->
    <div class="files-section">
      <div class="section-header">
        <h2>Your Files</h2>
        <button 
          (click)="loadFiles()" 
          [disabled]="isLoading"
          class="refresh-button"
          title="Refresh files list"
        >
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M23 4v6h-6"></path>
            <path d="M1 20v-6h6"></path>
            <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
          </svg>
          Refresh
        </button>
      </div>

      <!-- Loading State -->
      <div class="loading-container" *ngIf="isLoading">
        <div class="loading-spinner">
          <svg class="spinner" viewBox="0 0 50 50">
            <circle class="path" cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle>
          </svg>
          <p>Loading files...</p>
        </div>
      </div>

      <!-- Files List -->
      <div class="files-list" *ngIf="!isLoading">
        <div class="file-item" *ngFor="let file of files">
          <div class="file-info">
            <div class="file-icon">{{ getFileIcon(file.mimeType) }}</div>
            <div class="file-details">
              <h3 class="file-name">{{ file.originalName }}</h3>
              <div class="file-meta">
                <span class="file-size">{{ formatFileSize(file.fileSize) }}</span>
                <span class="file-date">{{ formatDate(file.createdAt) }}</span>
              </div>
            </div>
          </div>
          
          <div class="file-actions">
            <button 
              (click)="downloadFile(file)" 
              class="action-button download-button"
              title="Download file"
            >
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7,10 12,15 17,10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
              </svg>
              Download
            </button>
            
            <button 
              (click)="deleteFile(file)" 
              class="action-button delete-button"
              title="Delete file"
            >
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3,6 5,6 21,6"></polyline>
                <path d="M19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"></path>
              </svg>
              Delete
            </button>
          </div>
        </div>

        <!-- Empty State -->
        <div class="empty-state" *ngIf="files.length === 0">
          <div class="empty-icon">üìÅ</div>
          <h3>No Files Yet</h3>
          <p>Upload your first file to get started!</p>
        </div>
      </div>

      <!-- Files Summary -->
      <div class="files-summary" *ngIf="files.length > 0">
        <p>Total files: {{ files.length }}</p>
        <p>Total size: {{ getTotalSize() }}</p>
      </div>
    </div>
  </div>
</div> 